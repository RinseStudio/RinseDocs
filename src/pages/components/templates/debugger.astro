---
import Layout from '@/layouts/rinsedocs/Raw.astro';
import { Tabs, TabsList, TabsTrigger, TabsContent } from '@/components/Tabs';
import { Button } from '@/components/Button';
import Card from '@/components/Card';
import Table from '@/components/Table';
import {
  Dropdown,
  DropdownContent,
  DropdownGroup,
  DropdownHeader,
  DropdownItem,
  DropdownList,
  DropdownDivider,
  DropdownTrigger,
} from '@/components/Dropdown';
import { Tooltip, TooltipTrigger, TooltipContent } from '@/components/Tooltip';
import SearchField from '@/components/SearchField/index.astro';
---

<Layout class="">
  <div class="px-7 py-4">
    <h1 class="mb-2 text-lg font-bold text-black">Events Debugger</h1>
    <p class="text-sm text-gray-600">
      Events Debugger lets you monitor incoming Events and spot problems with
      your integration.
    </p>
  </div>
  <div class="mt-2 border-b border-zinc-200"></div>
  <div class="px-7 py-10">
    <div class="space-y-14">
      <div>
        <div class="mb-4 flex items-end justify-between">
          <div class="flex items-center gap-4">
            <h3 class="flex items-center gap-2 text-sm font-bold text-black">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="16"
                height="16"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
                class="lucide lucide-scan-search"
                ><path d="M3 7V5a2 2 0 0 1 2-2h2"></path><path
                  d="M17 3h2a2 2 0 0 1 2 2v2"></path><path
                  d="M21 17v2a2 2 0 0 1-2 2h-2"></path><path
                  d="M7 21H5a2 2 0 0 1-2-2v-2"></path><circle
                  cx="12"
                  cy="12"
                  r="3"></circle><path d="m16 16-1.9-1.9"></path></svg
              >
              Incoming Events
            </h3>
            <div class="h-4 w-px bg-zinc-200"></div>
            <div class="flex items-center gap-2">
              <button
                x-data="{isActive: true}"
                @click="isActive = !isActive"
                class="flex h-5 items-center rounded-full px-2 text-xs font-semibold"
                :class="isActive ? 'bg-green-500/10 text-green-500 hover:bg-green-500/20' : 'bg-zinc-500/10 text-zinc-400 hover:bg-zinc-500/20'"
                >Successful</button
              >
              <button
                x-data="{isActive: true}"
                @click="isActive = !isActive"
                class="flex h-5 items-center rounded-full px-2 text-xs font-semibold"
                :class="isActive ? 'bg-orange-500/10 text-orange-500 hover:bg-orange-500/20' : 'bg-zinc-500/10 text-zinc-400 hover:bg-zinc-500/20'"
                >Warning</button
              >
              <button
                x-data="{isActive: true}"
                @click="isActive = !isActive"
                class="flex h-5 items-center rounded-full px-2 text-xs font-semibold"
                :class="isActive ? 'bg-red-500/10 text-red-500 hover:bg-red-500/20' : 'bg-zinc-500/10 text-zinc-400 hover:bg-zinc-500/20'"
                >Error</button
              >
              <button
                x-data="{isActive: true}"
                @click="isActive = !isActive"
                class="flex h-5 items-center rounded-full px-2 text-xs font-semibold"
                :class="isActive ? 'bg-blue-500/10 text-blue-500 hover:bg-blue-500/20' : 'bg-zinc-500/10 text-zinc-400 hover:bg-zinc-500/20'"
                >Hint</button
              >
            </div>
          </div>
          <div class="flex items-center gap-2">
            <SearchField placeholder="Filter by keyword" />
            <Button size="md" variant="outline">
              <i class="fa-regular fa-sync mr-1.5"></i> Refresh
            </Button>
          </div>
        </div>

        <Card className="overflow-auto">
          <Table x-data="Table" className="table-fixed">
            <Table.Header>
              <Table.Row>
                <Table.Head
                  className="w-[180px] px-4 py-3 text-xs font-medium text-gray-900"
                >
                  Date
                </Table.Head>
                <Table.Head
                  className="w-[180px] px-4 py-3 text-xs font-medium text-gray-900"
                >
                  URL
                </Table.Head>
                <Table.Head
                  className="w-[180px] px-4 py-3 text-xs font-medium text-gray-900"
                >
                  Event
                </Table.Head>
                <Table.Head
                  className="w-[180px] px-4 py-3 text-xs font-medium text-gray-900"
                >
                  Status
                </Table.Head>
                <Table.Head
                  className="w-[180px] px-4 py-3 text-xs font-medium text-gray-900"
                >
                  Action
                </Table.Head>
                <Table.Head
                  className="w-full px-4 py-3 text-xs font-medium text-gray-900"
                >
                  Message
                </Table.Head>
              </Table.Row>
            </Table.Header>
            <Table.Body>
              <Table.Row className="cursor-pointer hover:bg-zinc-50">
                <Table.Cell className="whitespace-nowrap px-4 py-4 font-medium">
                  <div class="flex items-center gap-3">
                    <div class="h-3 w-3 rounded-full bg-red-500"></div>
                    Jan 10, 04:35
                  </div>
                </Table.Cell>
                <Table.Cell className="whitespace-nowrap px-4 py-4 font-medium">
                  /v1/log
                </Table.Cell>
                <Table.Cell className="whitespace-nowrap px-4 py-4 font-medium">
                  $profile_update
                </Table.Cell>
                <Table.Cell className="whitespace-nowrap px-4 py-4 font-medium">
                  succeeded
                </Table.Cell>
                <Table.Cell className="whitespace-nowrap px-4 py-4 font-medium">
                  –
                </Table.Cell>
                <Table.Cell className="truncate px-4 py-4 font-mono">
                  response.body: One or more parameters are invalid: context[ip]
                  Private and local IP addresses are not allowed in production
                  environments. If your application sits behind a firewall, the
                  true client IP can often be found in a header such as
                  X-Forwarded-For
                </Table.Cell>
              </Table.Row>
              <Table.Row className="cursor-pointer hover:bg-zinc-50">
                <Table.Cell className="whitespace-nowrap px-4 py-4 font-medium">
                  <div class="flex items-center gap-3">
                    <div class="h-3 w-3 rounded-full bg-orange-500"></div>
                    Jan 10, 04:35
                  </div>
                </Table.Cell>
                <Table.Cell className="whitespace-nowrap px-4 py-4 font-medium">
                  /v1/log
                </Table.Cell>
                <Table.Cell className="whitespace-nowrap px-4 py-4 font-medium">
                  $profile_update
                </Table.Cell>
                <Table.Cell className="whitespace-nowrap px-4 py-4 font-medium">
                  succeeded
                </Table.Cell>
                <Table.Cell className="whitespace-nowrap px-4 py-4 font-medium">
                  –
                </Table.Cell>
                <Table.Cell className="truncate px-4 py-4 font-mono">
                  response.body: One or more parameters are invalid: context[ip]
                  Private and local IP addresses are not allowed in production
                  environments. If your application sits behind a firewall, the
                  true client IP can often be found in a header such as
                  X-Forwarded-For
                </Table.Cell>
              </Table.Row>
              <Table.Row className="cursor-pointer hover:bg-zinc-50">
                <Table.Cell className="whitespace-nowrap px-4 py-4 font-medium">
                  <div class="flex items-center gap-3">
                    <div class="h-3 w-3 rounded-full bg-orange-500"></div>
                    Jan 10, 04:35
                  </div>
                </Table.Cell>
                <Table.Cell className="whitespace-nowrap px-4 py-4 font-medium">
                  /v1/log
                </Table.Cell>
                <Table.Cell className="whitespace-nowrap px-4 py-4 font-medium">
                  $profile_update
                </Table.Cell>
                <Table.Cell className="whitespace-nowrap px-4 py-4 font-medium">
                  succeeded
                </Table.Cell>
                <Table.Cell className="whitespace-nowrap px-4 py-4 font-medium">
                  –
                </Table.Cell>
                <Table.Cell className="truncate px-4 py-4 font-mono">
                  response.body: One or more parameters are invalid: context[ip]
                  Private and local IP addresses are not allowed in production
                  environments. If your application sits behind a firewall, the
                  true client IP can often be found in a header such as
                  X-Forwarded-For
                </Table.Cell>
              </Table.Row>
            </Table.Body>
            <Table.Footer>
              <Table.Row className="bg-zinc-50">
                <Table.Cell
                  colspan="7"
                  className="px-4 py-3 text-left font-medium text-gray-900"
                >
                  Total 3 events
                </Table.Cell>
              </Table.Row>
            </Table.Footer>
          </Table>
        </Card>
      </div>
    </div>
  </div>
</Layout>

<script>
  import Alpine from 'alpinejs';

  Alpine.data('Table', () => ({
    sortSelection: 0,
    isAscending: true,
    updateHeaderState(selection) {
      if (this.sortSelection == selection) {
        this.isAscending = !this.isAscending;
      } else {
        this.isAscending = true;
        this.sortSelection = selection;
      }
    },
  }));
</script>@/components/Button@/components/Card@/components/Table@/components/Dropdown@/components/Tooltip
@/components/Tabs@/components/Button@/components/Card@/components/Table@/components/Dropdown@/components/Tooltip

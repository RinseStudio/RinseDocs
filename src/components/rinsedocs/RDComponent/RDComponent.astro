---
const { languages, url, height } = Astro.props;
---

<div x-data="{mode: 'preview', selection: 0}" class="rd-component overflow-hidden rounded-lg bg-[#121723]">
	<div class="flex h-9 items-center justify-between border-b border-white/10 px-4">
		<div class="flex items-center gap-4 text-xs font-medium">
			<button @click="mode = 'preview'" x-bind:class="mode === 'preview' ? 'text-white' : 'text-white/60'">Preview</button>
			<button @click="mode = 'code'" x-bind:class="mode === 'code' ? 'text-white' : 'text-white/60'">Code</button>
		</div>
		<div>
			<div class="relative"></div>

			<div class="relative inline-block text-left">
				<div>
					<button type="button" class="inline-flex w-full justify-center gap-1.5 text-xs font-semibold text-white" id="menu-button" aria-expanded="true" aria-haspopup="true">
						HTML
						<svg
							class="h-4 w-4 text-white"
							xmlns="http://www.w3.org/2000/svg"
							width="24"
							height="24"
							viewBox="0 0 24 24"
							fill="none"
							stroke="currentColor"
							stroke-width="2.5"
							stroke-linecap="round"
							stroke-linejoin="round"
							class="lucide lucide-chevron-down"><path d="m6 9 6 6 6-6"></path></svg
						>
					</button>
				</div>

				<!--
    Dropdown menu, show/hide based on menu state.

    Entering: "transition ease-out duration-100"
      From: "transform opacity-0 scale-95"
      To: "transform opacity-100 scale-100"
    Leaving: "transition ease-in duration-75"
      From: "transform opacity-100 scale-100"
      To: "transform opacity-0 scale-95"
  -->
				<div
					class="absolute right-0 z-10 mt-2 origin-top-right rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none"
					role="menu"
					aria-orientation="vertical"
					aria-labelledby="menu-button"
					tabindex="-1"
				>
					<div class="py-1" role="none">
						{
							languages.map((language, index) => (
								<a
									x-on:click={"selection = '" + language + "'"}
									x-show={'selection = ' + index}
									class="block px-4 py-2 text-sm text-gray-700"
									role="menuitem"
									tabindex="-1"
									id="menu-item-0"
								>
									{language}
								</a>
							))
						}
					</div>
				</div>
			</div>
		</div>
	</div>

	<div>
		<div x-show="mode == 'preview'">
			<iframe src={url} class="rd-component-iframe flex w-full items-center justify-center overflow-hidden"></iframe>
		</div>

		<div x-show="mode == 'code'" x-cloak>
			<slot />
		</div>
	</div>
</div>
